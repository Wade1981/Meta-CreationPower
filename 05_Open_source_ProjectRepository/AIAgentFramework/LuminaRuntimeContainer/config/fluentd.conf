# Lumina Runtime Container - Fluentd配置

<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<source>
  @type tail
  path /app/logs/*.log
  pos_file /app/logs/fluentd.pos
  tag lumina.log
  <parse>
    @type json
    time_key time
    time_format %Y-%m-%dT%H:%M:%S.%NZ
  </parse>
</source>

<filter lumina.**>
  @type record_transformer
  <record>
    hostname ${hostname}
    container_name lumina-runtime
  </record>
</filter>

<match lumina.**>
  @type stdout
  <format>
    @type json
    pretty true
  </format>
</match>

<match **>
  @type file
  path /app/logs/output
  <buffer>
    flush_interval 5s
  </buffer>
  <format>
    @type json
  </format>
  time_slice_format %Y%m%d
  time_slice_wait 10m
  time_format %Y-%m-%dT%H:%M:%S.%NZ
</match>
